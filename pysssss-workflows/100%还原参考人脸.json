{"last_node_id": 72, "last_link_id": 145, "nodes": [{"id": 7, "type": "CLIPTextEncode", "pos": [720, 1010], "size": {"0": 430, "1": 180}, "flags": {}, "order": 7, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 5}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [6, 73], "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["blurry, noisy, messy, lowres, jpeg, artifacts, ill, distorted, malformed, naked"]}, {"id": 5, "type": "EmptyLatentImage", "pos": [830, 1260], "size": {"0": 320, "1": 110}, "flags": {}, "order": 0, "mode": 0, "outputs": [{"name": "LATENT", "type": "LATENT", "links": [2], "slot_index": 0}], "properties": {"Node name for S&R": "EmptyLatentImage"}, "widgets_values": [1024, 1024, 4]}, {"id": 40, "type": "VAEDecode", "pos": [4520, 370], "size": {"0": 140, "1": 50}, "flags": {}, "order": 27, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": 76}, {"name": "vae", "type": "VAE", "link": 77}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [81], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEDecode"}}, {"id": 33, "type": "ImageBatch", "pos": [420, 236], "size": {"0": 140, "1": 50}, "flags": {}, "order": 12, "mode": 0, "inputs": [{"name": "image1", "type": "IMAGE", "link": 61}, {"name": "image2", "type": "IMAGE", "link": 62}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [63], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ImageBatch"}}, {"id": 39, "type": "KSampler", "pos": [4140, 350], "size": {"0": 320, "1": 260}, "flags": {}, "order": 26, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 71}, {"name": "positive", "type": "CONDITIONING", "link": 86}, {"name": "negative", "type": "CONDITIONING", "link": 73}, {"name": "latent_image", "type": "LATENT", "link": 84}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [76], "slot_index": 0}], "properties": {"Node name for S&R": "KSampler"}, "widgets_values": [1, "fixed", 8, 2, "dpmpp_2m", "karras", 0.3]}, {"id": 37, "type": "VAEEncode", "pos": [3550, 420], "size": {"0": 140, "1": 50}, "flags": {}, "order": 24, "mode": 0, "inputs": [{"name": "pixels", "type": "IMAGE", "link": 68}, {"name": "vae", "type": "VAE", "link": 70}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [83], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEEncode"}}, {"id": 6, "type": "CLIPTextEncode", "pos": [720, 780], "size": {"0": 420, "1": 160}, "flags": {}, "order": 6, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 3}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [4], "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["closeup of a beautiful woman wearing a suit and tie\n\nserene, sunset, spring, high quality, detailed, diffuse light"]}, {"id": 18, "type": "IPAdapterFaceID", "pos": [776, 374], "size": {"0": 320, "1": 320}, "flags": {}, "order": 14, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 35}, {"name": "ipadapter", "type": "IPADAPTER", "link": 34, "slot_index": 1}, {"name": "image", "type": "IMAGE", "link": 63}, {"name": "image_negative", "type": "IMAGE", "link": null}, {"name": "attn_mask", "type": "MASK", "link": null}, {"name": "clip_vision", "type": "CLIP_VISION", "link": null}, {"name": "insightface", "type": "INSIGHTFACE", "link": null}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [43], "shape": 3, "slot_index": 0}, {"name": "face_image", "type": "IMAGE", "links": [49], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "IPAdapterFaceID"}, "widgets_values": [0.8, 2, "linear", "average", 0, 1, "V only"]}, {"id": 25, "type": "IPAdapterAdvanced", "pos": [1181, 365], "size": {"0": 230, "1": 280}, "flags": {}, "order": 16, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 47}, {"name": "ipadapter", "type": "IPADAPTER", "link": 50}, {"name": "image", "type": "IMAGE", "link": 49}, {"name": "image_negative", "type": "IMAGE", "link": null}, {"name": "attn_mask", "type": "MASK", "link": null}, {"name": "clip_vision", "type": "CLIP_VISION", "link": null}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [48, 71], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "IPAdapterAdvanced"}, "widgets_values": [0.5, "linear", "average", 0, 1, "V only"]}, {"id": 24, "type": "PreviewImage", "pos": [2531, 889], "size": {"0": 890, "1": 880}, "flags": {}, "order": 20, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 55}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 3, "type": "KSampler", "pos": [1521, 721], "size": {"0": 320, "1": 260}, "flags": {}, "order": 17, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 48}, {"name": "positive", "type": "CONDITIONING", "link": 4}, {"name": "negative", "type": "CONDITIONING", "link": 6}, {"name": "latent_image", "type": "LATENT", "link": 2}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [7], "slot_index": 0}], "properties": {"Node name for S&R": "KSampler"}, "widgets_values": [0, "fixed", 8, 2, "dpmpp_2m", "karras", 1]}, {"id": 27, "type": "FaceEmbedDistance", "pos": [2159, 490], "size": {"0": 320, "1": 170}, "flags": {}, "order": 19, "mode": 0, "inputs": [{"name": "analysis_models", "type": "ANALYSIS_MODELS", "link": 52, "slot_index": 0}, {"name": "reference", "type": "IMAGE", "link": 54}, {"name": "image", "type": "IMAGE", "link": 53}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [55, 141, 142], "shape": 3, "slot_index": 0}, {"name": "distance", "type": "FLOAT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "FaceEmbedDistance"}, "widgets_values": ["L2_norm", 100, 1, false]}, {"id": 8, "type": "VAEDecode", "pos": [1901, 718], "size": {"0": 140, "1": 50}, "flags": {}, "order": 18, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": 7}, {"name": "vae", "type": "VAE", "link": 8}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [53], "slot_index": 0}], "properties": {"Node name for S&R": "VAEDecode"}}, {"id": 35, "type": "PreviewImage", "pos": [2778, 69], "size": {"0": 210, "1": 250}, "flags": {}, "order": 22, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 66}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 36, "type": "ImageResize+", "pos": [3103, 369], "size": {"0": 320, "1": 220}, "flags": {}, "order": 23, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 67}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [68], "shape": 3, "slot_index": 0}, {"name": "width", "type": "INT", "links": null, "shape": 3}, {"name": "height", "type": "INT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "ImageResize+"}, "widgets_values": [1024, 0, "lanczos", true, "always", 0]}, {"id": 43, "type": "RepeatLatentBatch", "pos": [3791, 407], "size": {"0": 210, "1": 60}, "flags": {}, "order": 25, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": 83}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [84], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "RepeatLatentBatch"}, "widgets_values": [6]}, {"id": 44, "type": "CLIPTextEncode", "pos": [3713, 155], "size": {"0": 300, "1": 160}, "flags": {}, "order": 8, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 85}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [86], "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["closeup of a beautiful woman with perfect gray eyes\n\nserene, high quality, detailed, diffuse light, 4k, skin details"]}, {"id": 31, "type": "ImageRandomTransform+", "pos": [35, 311], "size": {"0": 240, "1": 130}, "flags": {}, "order": 11, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 59}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [62, 143], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ImageRandomTransform+"}, "widgets_values": [0, "fixed", 4, 0.4]}, {"id": 70, "type": "PreviewImage", "pos": [5, 506], "size": {"0": 270, "1": 250}, "flags": {}, "order": 13, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 143}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 30, "type": "ImageBatch", "pos": [-150, 220], "size": {"0": 140, "1": 50}, "flags": {}, "order": 10, "mode": 0, "inputs": [{"name": "image1", "type": "IMAGE", "link": 56}, {"name": "image2", "type": "IMAGE", "link": 57}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [59, 61], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ImageBatch"}}, {"id": 22, "type": "IPAdapterUnifiedLoader", "pos": [796, 227], "size": {"0": 290, "1": 80}, "flags": {}, "order": 15, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 43}, {"name": "ipadapter", "type": "IPADAPTER", "link": 38}], "outputs": [{"name": "model", "type": "MODEL", "links": [47], "shape": 3, "slot_index": 0}, {"name": "ipadapter", "type": "IPADAPTER", "links": [50], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "IPAdapterUnifiedLoader"}, "widgets_values": ["PLUS FACE (portraits)"]}, {"id": 38, "type": "Reroute", "pos": [3365, 723], "size": [75, 26], "flags": {}, "order": 9, "mode": 0, "inputs": [{"name": "", "type": "*", "link": 69}], "outputs": [{"name": "", "type": "VAE", "links": [70, 77], "slot_index": 0}], "properties": {"showOutputText": false, "horizontal": false}}, {"id": 41, "type": "FaceEmbedDistance", "pos": [4708, 270], "size": {"0": 210, "1": 170}, "flags": {}, "order": 28, "mode": 0, "inputs": [{"name": "analysis_models", "type": "ANALYSIS_MODELS", "link": 78, "slot_index": 0}, {"name": "reference", "type": "IMAGE", "link": 79}, {"name": "image", "type": "IMAGE", "link": 81}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [106], "shape": 3, "slot_index": 0}, {"name": "distance", "type": "FLOAT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "FaceEmbedDistance"}, "widgets_values": ["L2_norm", 100, 1, true]}, {"id": 55, "type": "ImageCompositeMasked", "pos": [5677, 210], "size": {"0": 210, "1": 140}, "flags": {}, "order": 32, "mode": 0, "inputs": [{"name": "destination", "type": "IMAGE", "link": 142}, {"name": "source", "type": "IMAGE", "link": 114}, {"name": "mask", "type": "MASK", "link": 115}, {"name": "x", "type": "INT", "link": 111, "widget": {"name": "x"}}, {"name": "y", "type": "INT", "link": 112, "widget": {"name": "y"}}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [128], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ImageCompositeMasked"}, "widgets_values": [0, 0, false]}, {"id": 59, "type": "FaceEmbedDistance", "pos": [5938, 167], "size": {"0": 210, "1": 170}, "flags": {}, "order": 33, "mode": 0, "inputs": [{"name": "analysis_models", "type": "ANALYSIS_MODELS", "link": 125, "slot_index": 0}, {"name": "reference", "type": "IMAGE", "link": 126}, {"name": "image", "type": "IMAGE", "link": 128}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [129], "shape": 3, "slot_index": 0}, {"name": "distance", "type": "FLOAT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "FaceEmbedDistance"}, "widgets_values": ["cosine", 100, 1, true]}, {"id": 56, "type": "PreviewImage", "pos": [4672, 618], "size": {"0": 1100, "1": 1160}, "flags": {}, "order": 34, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 129}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 52, "type": "FaceSegmentation", "pos": [5300, 204], "size": {"0": 320, "1": 270}, "flags": {}, "order": 30, "mode": 0, "inputs": [{"name": "analysis_models", "type": "ANALYSIS_MODELS", "link": 107}, {"name": "image", "type": "IMAGE", "link": 108}], "outputs": [{"name": "mask", "type": "MASK", "links": [115], "shape": 3, "slot_index": 0}, {"name": "image", "type": "IMAGE", "links": [], "shape": 3, "slot_index": 1}, {"name": "seg_mask", "type": "MASK", "links": null, "shape": 3}, {"name": "seg_image", "type": "IMAGE", "links": null, "shape": 3}, {"name": "x", "type": "INT", "links": null, "shape": 3}, {"name": "y", "type": "INT", "links": null, "shape": 3}, {"name": "width", "type": "INT", "links": null, "shape": 3}, {"name": "height", "type": "INT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "FaceSegmentation"}, "widgets_values": ["face+forehead (if available)", -12, false, 55]}, {"id": 51, "type": "ImageResize+", "pos": [4967, 269], "size": {"0": 260, "1": 170}, "flags": {}, "order": 29, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 106}, {"name": "width", "type": "INT", "link": 104, "widget": {"name": "width"}}, {"name": "height", "type": "INT", "link": 105, "widget": {"name": "height"}}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [108, 114, 145], "shape": 3, "slot_index": 0}, {"name": "width", "type": "INT", "links": null, "shape": 3}, {"name": "height", "type": "INT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "ImageResize+"}, "widgets_values": [512, 512, "lanczos", false, "always", 0]}, {"id": 72, "type": "PreviewImage", "pos": [5397, -124], "size": {"0": 210, "1": 250}, "flags": {}, "order": 31, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 145}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 34, "type": "FaceBoundingBox", "pos": [2680, 370], "size": {"0": 320, "1": 190}, "flags": {}, "order": 21, "mode": 0, "inputs": [{"name": "analysis_models", "type": "ANALYSIS_MODELS", "link": 64}, {"name": "image", "type": "IMAGE", "link": 141}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [66, 67], "shape": 6, "slot_index": 0}, {"name": "x", "type": "INT", "links": [111], "shape": 6, "slot_index": 1}, {"name": "y", "type": "INT", "links": [112], "shape": 6, "slot_index": 2}, {"name": "width", "type": "INT", "links": [104], "shape": 6, "slot_index": 3}, {"name": "height", "type": "INT", "links": [105], "shape": 6, "slot_index": 4}], "properties": {"Node name for S&R": "FaceBoundingBox"}, "widgets_values": [0, 0.5, 0]}, {"id": 29, "type": "LoadImage", "pos": [-590, 390], "size": [320, 310], "flags": {}, "order": 1, "mode": 0, "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [57], "shape": 3, "slot_index": 0}, {"name": "MASK", "type": "MASK", "links": null, "shape": 3}], "properties": {"Node name for S&R": "LoadImage"}, "widgets_values": ["\u6587\u548f\u73ca11 (1).jpg", "image"]}, {"id": 4, "type": "CheckpointLoaderSimple", "pos": [-44, 836], "size": {"0": 320, "1": 100}, "flags": {}, "order": 2, "mode": 0, "outputs": [{"name": "MODEL", "type": "MODEL", "links": [36], "slot_index": 0}, {"name": "CLIP", "type": "CLIP", "links": [3, 5, 85], "slot_index": 1}, {"name": "VAE", "type": "VAE", "links": [8, 69], "slot_index": 2}], "properties": {"Node name for S&R": "CheckpointLoaderSimple"}, "widgets_values": ["juggernautXL_v9Rdphoto2Lightning.safetensors"]}, {"id": 28, "type": "FaceAnalysisModels", "pos": [1728, 243], "size": {"0": 320, "1": 80}, "flags": {}, "order": 3, "mode": 0, "outputs": [{"name": "ANALYSIS_MODELS", "type": "ANALYSIS_MODELS", "links": [52, 64, 78, 107, 125], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "FaceAnalysisModels"}, "widgets_values": ["insightface", "CUDA"]}, {"id": 20, "type": "IPAdapterUnifiedLoaderFaceID", "pos": [394, 376], "size": {"0": 320, "1": 130}, "flags": {}, "order": 5, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 36}, {"name": "ipadapter", "type": "IPADAPTER", "link": null}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [35], "shape": 3, "slot_index": 0}, {"name": "ipadapter", "type": "IPADAPTER", "links": [34, 38], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "IPAdapterUnifiedLoaderFaceID"}, "widgets_values": ["FACEID PLUS V2", 0.6, "CUDA"]}, {"id": 12, "type": "LoadImage", "pos": [-600, -10], "size": [320, 310], "flags": {}, "order": 4, "mode": 0, "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [54, 56, 79, 126], "shape": 3, "slot_index": 0}, {"name": "MASK", "type": "MASK", "links": null, "shape": 3}], "properties": {"Node name for S&R": "LoadImage"}, "widgets_values": ["\u6587\u548f\u73ca23.jpg", "image"]}], "links": [[2, 5, 0, 3, 3, "LATENT"], [3, 4, 1, 6, 0, "CLIP"], [4, 6, 0, 3, 1, "CONDITIONING"], [5, 4, 1, 7, 0, "CLIP"], [6, 7, 0, 3, 2, "CONDITIONING"], [7, 3, 0, 8, 0, "LATENT"], [8, 4, 2, 8, 1, "VAE"], [34, 20, 1, 18, 1, "IPADAPTER"], [35, 20, 0, 18, 0, "MODEL"], [36, 4, 0, 20, 0, "MODEL"], [38, 20, 1, 22, 1, "IPADAPTER"], [43, 18, 0, 22, 0, "MODEL"], [47, 22, 0, 25, 0, "MODEL"], [48, 25, 0, 3, 0, "MODEL"], [49, 18, 1, 25, 2, "IMAGE"], [50, 22, 1, 25, 1, "IPADAPTER"], [52, 28, 0, 27, 0, "ANALYSIS_MODELS"], [53, 8, 0, 27, 2, "IMAGE"], [54, 12, 0, 27, 1, "IMAGE"], [55, 27, 0, 24, 0, "IMAGE"], [56, 12, 0, 30, 0, "IMAGE"], [57, 29, 0, 30, 1, "IMAGE"], [59, 30, 0, 31, 0, "IMAGE"], [61, 30, 0, 33, 0, "IMAGE"], [62, 31, 0, 33, 1, "IMAGE"], [63, 33, 0, 18, 2, "IMAGE"], [64, 28, 0, 34, 0, "ANALYSIS_MODELS"], [66, 34, 0, 35, 0, "IMAGE"], [67, 34, 0, 36, 0, "IMAGE"], [68, 36, 0, 37, 0, "IMAGE"], [69, 4, 2, 38, 0, "*"], [70, 38, 0, 37, 1, "VAE"], [71, 25, 0, 39, 0, "MODEL"], [73, 7, 0, 39, 2, "CONDITIONING"], [76, 39, 0, 40, 0, "LATENT"], [77, 38, 0, 40, 1, "VAE"], [78, 28, 0, 41, 0, "ANALYSIS_MODELS"], [79, 12, 0, 41, 1, "IMAGE"], [81, 40, 0, 41, 2, "IMAGE"], [83, 37, 0, 43, 0, "LATENT"], [84, 43, 0, 39, 3, "LATENT"], [85, 4, 1, 44, 0, "CLIP"], [86, 44, 0, 39, 1, "CONDITIONING"], [104, 34, 3, 51, 1, "INT"], [105, 34, 4, 51, 2, "INT"], [106, 41, 0, 51, 0, "IMAGE"], [107, 28, 0, 52, 0, "ANALYSIS_MODELS"], [108, 51, 0, 52, 1, "IMAGE"], [111, 34, 1, 55, 3, "INT"], [112, 34, 2, 55, 4, "INT"], [114, 51, 0, 55, 1, "IMAGE"], [115, 52, 0, 55, 2, "MASK"], [125, 28, 0, 59, 0, "ANALYSIS_MODELS"], [126, 12, 0, 59, 1, "IMAGE"], [128, 55, 0, 59, 2, "IMAGE"], [129, 59, 0, 56, 0, "IMAGE"], [141, 27, 0, 34, 1, "IMAGE"], [142, 27, 0, 55, 0, "IMAGE"], [143, 31, 0, 70, 0, "IMAGE"], [145, 51, 0, 72, 0, "IMAGE"]], "groups": [], "config": {}, "extra": {"ds": {"scale": 0.19084392826762395, "offset": [1142.7590229408631, 1051.509727104069]}}, "version": 0.4}